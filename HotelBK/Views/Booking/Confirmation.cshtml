@model HotelBK.Models.Booking
@{
    ViewData["Title"] = "Xác nhận đặt phòng";

    // Calculate total price and nights
    int nights = (Model.CheckOutDate - Model.CheckInDate).Days;
    if (nights < 1) nights = 1;
    decimal totalPrice = Model.Room.Price * Model.RoomCount * nights;
}

<div>
    <!-- Page Header Start -->
    <div class="container-fluid page-header mb-5 p-0" style="background-image: url(/img/carousel-1.jpg);">
        <div class="container-fluid page-header-inner py-5">
            <div class="container text-center pb-5">
                <h1 class="display-3 text-white mb-3 animated slideInDown">Xác nhận đặt phòng</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center text-uppercase">
                        <li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
                        <li class="breadcrumb-item text-white active" aria-current="page">Xác nhận đặt phòng</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <!-- Page Header End -->
    <!-- Confirmation Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="text-center mb-5">
                        <div class="d-inline-block p-4 bg-primary rounded-circle mb-4">
                            <i class="fa fa-check-circle text-white" style="font-size: 3rem;"></i>
                        </div>
                        <h2>Đặt phòng thành công!</h2>
                        <p class="lead">Cảm ơn bạn đã lựa chọn Lotus Hotel. Chi tiết đặt phòng của bạn được liệt kê dưới đây.</p>
                    </div>

                    <!-- Booking Information Card -->
                    <div class="card shadow-sm border-0 mb-4">
                        <div class="card-header bg-primary text-white py-3">
                            <h4 class="mb-0">Chi tiết đặt phòng #@Model.BookingID</h4>
                        </div>
                        <div class="card-body p-4">
                            <div class="row">
                                <!-- Room Information with Image -->
                                <div class="col-md-5 mb-4 mb-md-0">
                                    <div class="text-center">
                                        @if (!string.IsNullOrEmpty(Model.Room.Image))
                                        {
                                            <img src="@Model.Room.Image" alt="@Model.Room.RoomName" class="img-fluid rounded mb-3" style="max-height: 200px; object-fit: cover;">
                                        }
                                        else
                                        {
                                            <img src="/img/room-1.jpg" alt="@Model.Room.RoomName" class="img-fluid rounded mb-3" style="max-height: 200px; object-fit: cover;">
                                        }
                                        <h5>@Model.Room.RoomName</h5>
                                        <div>
                                            @for (int i = 0; i < (Model.Room.StarRating ?? 0); i++)
                                            {
                                                <small class="fa fa-star text-primary"></small>
                                            }
                                        </div>
                                        <p class="mt-2 mb-0">@Model.Room.Price.ToString("N0") VNĐ/đêm</p>
                                    </div>
                                </div>

                                <!-- Booking Details -->
                                <div class="col-md-7">
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Người đặt:</div>
                                        <div class="col-7">@Model.FullName</div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Email:</div>
                                        <div class="col-7">@Model.Email</div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Số điện thoại:</div>
                                        <div class="col-7">@Model.Phone</div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Ngày nhận phòng:</div>
                                        <div class="col-7">@Model.CheckInDate.ToString("dd/MM/yyyy") (từ 14:00)</div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Ngày trả phòng:</div>
                                        <div class="col-7">@Model.CheckOutDate.ToString("dd/MM/yyyy") (trước 12:00)</div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Số đêm:</div>
                                        <div class="col-7">@nights đêm</div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Số lượng phòng:</div>
                                        <div class="col-7">@Model.RoomCount phòng</div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-5 fw-bold">Tình trạng:</div>
                                        <div class="col-7">
                                            <span class="badge bg-warning">@Model.Status</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-5 fw-bold">Ngày đặt:</div>
                                        <div class="col-7">@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Summary -->
                    <div class="card shadow-sm border-0 mb-5">
                        <div class="card-header bg-light py-3">
                            <h5 class="mb-0">Chi tiết thanh toán</h5>
                        </div>
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Giá phòng:</span>
                                <span>@Model.Room.Price.ToString("N0") VNĐ x @nights đêm x @Model.RoomCount phòng</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Thuế và phí:</span>
                                <span>Đã bao gồm</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between fw-bold">
                                <span>Tổng cộng:</span>
                                <span class="text-primary fs-5">@totalPrice.ToString("N0") VNĐ</span>
                            </div>
                            <div class="text-center mt-4">
                                <div class="alert alert-info mb-0">
                                    <i class="fa fa-info-circle me-2"></i> Thanh toán sẽ được thực hiện tại quầy lễ tân khi nhận phòng.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- What's Next + Hotel Policy -->
                    <div class="row g-4 mb-4">
                        <div class="col-md-6">
                            <div class="card shadow-sm border-0 h-100">
                                <div class="card-header bg-light py-3">
                                    <h5 class="mb-0">Bước tiếp theo</h5>
                                </div>
                                <div class="card-body p-4">
                                    <ul class="list-unstyled mb-0">
                                        <li class="mb-3"><i class="fa fa-envelope text-primary me-2"></i> Email xác nhận đã được gửi đến <strong>@Model.Email</strong></li>
                                        <li class="mb-3"><i class="fa fa-id-card text-primary me-2"></i> Hãy mang theo CMND/CCCD khi nhận phòng</li>
                                        <li><i class="fa fa-phone text-primary me-2"></i> Nhân viên của chúng tôi sẽ liên hệ xác nhận trong vòng 24 giờ</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card shadow-sm border-0 h-100">
                                <div class="card-header bg-light py-3">
                                    <h5 class="mb-0">Chính sách</h5>
                                </div>
                                <div class="card-body p-4">
                                    <ul class="list-unstyled mb-0">
                                        <li class="mb-3"><i class="fa fa-check-circle text-primary me-2"></i> Miễn phí hủy phòng trước 24 giờ</li>
                                        <li class="mb-3"><i class="fa fa-check-circle text-primary me-2"></i> Nhận phòng: 14:00, Trả phòng: 12:00</li>
                                        <li><i class="fa fa-check-circle text-primary me-2"></i> Bữa sáng miễn phí từ 6:00 - 10:00</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="text-center">
                        <a href="/" class="btn btn-secondary me-2">Quay lại trang chủ</a>
                        <a href="/Room" class="btn btn-primary">Đặt thêm phòng</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Confirmation End -->
</div>